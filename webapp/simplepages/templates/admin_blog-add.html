{% extends 'Admin/admin-base.html' %}
{% load static %}
{% block title %} Add Blog {% endblock %} 
{% block content %}


<div class="content-wrapper">
	<!-- Main content -->
	<section class="content container-fluid">
		<div class="manage_admin">
<div class="alert alert-danger  text-center" role="alert">
      </div>
			<div class="s_paypal_struct">
				<h4>Add Blog</h4>
				<div class="mb-2">
					<div class="row">
						<div class="col-md-6">
							<form method="post" id="login_form" enctype="multipart/form-data">
								{% csrf_token %}
								<div class="mt-2">
									<label for=""><span class="lbl_span">*</span>Blog Category</label>
									<select name="category"  class="form-control">
										<option value="" disabled selected>Select Category</option>
										{% for cat in category %}
										<option value="{{cat.id}}">{{cat.category_name}} </option>     {% endfor %}
									</select>
								</div>
								<div class="mt-3">
									<label for=""><span class="lbl_span">*</span>Title</label>
									<input type="text"  name="title" class="form-control">
								</div>
								<div class="mt-2">
									<label for="">Sort Order</label>
									<input type="number"   name="order" min="1" class="form-control">
								</div>
								<div class="mt-2">
									<label for=""><span class="lbl_span">*</span> Cover Image</label>
									<input type="file"   name="image" class="form-control">
								</div>
						</div>
						<div class="col-md-6">
							<form action="">
								<div class="mt-2">
									<label for=""><span class="lbl_span">*</span>Status</label>
									<select name="status" id="status"  class="form-control">
										<option value="" disabled selected>Select Status</option>
										<option value="active">Active</option>
										<option value="deactive">Deactive</option>   
									</select>
								</div>
								<div class="mt-2">
									<label for="editor1"><span class="lbl_span">*</span>Description</label>
									<textarea name="description" id="editor1" rows="10" cols="80">
									</textarea>
								</div>
						</div>
						<button type="submit" class="edit  btn btn-success mr-3 ml-3">
							<i class="fa fa-check" aria-hidden="true"></i> Save
						</button>
						<button type="button" class="delete btn btn-warning">
							<i class="fa fa-ban" aria-hidden="true"></i> Cancel
						</button>
						</form>
					</div>
				</div>
			</div>
		</div>
	</section>
	<!-- /.content -->
</div>
<!-- /.content-wrapper -->

{% endblock %}


{% block extrascript %}

<script>
$('.edit').on("click", function() {

var $inputs = $('#login_form :input');
var values = {};
$inputs.each(function() {
  values[this.name] = $(this).val();
});
var error_list  =[];
var submit = true;

  if (values['category'] == null || values['category'] == "") {
    nameError = "Please Select Category";
    error_list.push(nameError);
    submit = false;
  }
  var status = document.getElementById('status').value;
  if (status == null || status == "") {
    statusError = "Please Select Status";
    error_list.push(statusError);
    submit = false;
  }
 if (values['title'] == null || values['title'] == "") {
    titleError = "Please Enter Title";
    error_list.push(titleError);
    submit = false;
  }
  var description = CKEDITOR.instances.editor1.getData()
  if (description == null || description == "") {
    descriptionError = "Please Enter Descripition";
    error_list.push(descriptionError);
    submit = false;
  }

  if (values['order'] == null || values['order'] == "") {
    orderError = "Please Enetr Sort Order";
    error_list.push(orderError);
    submit = false;
  }
  if (values['image'] == null || values['image'] == "") {
    imgError = "Please Select Cover Image";
    error_list.push(imgError);
    submit = false;
  }

  if (error_list.length > 0){
    $('.alert-danger').show();
    $('.alert-danger').html("");
    var i;
    for (i = 0; i<error_list.length; i++){
      $('.alert-danger').append('<p>'+ error_list[i]+'</p>')
      $('html, body').animate({
        scrollTop: $(".alert-danger").offset().top
       },1);
    }

  }
  return submit;
});

	CKEDITOR.replace( 'editor1' );

	$('.delete').on('click', function() {
		window.history.back();
	});
</script>

{% endblock %}

